<html>
    <head>
        <title>
            Entry Point
        </title>
        <meta name = "viewport" content = "width = device-width, initial-scale = 1">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <script type = "text/javascript" src = "https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script src = "https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js">
        </script>
            <script  language="JavaScript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous"></script>
           <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.js" integrity="sha512-otOZr2EcknK9a5aa3BbMR9XOjYKtxxscwyRHN6zmdXuRfJ5uApkHB7cz1laWk2g8RKLzV9qv/fl3RPwfCuoxHQ==" crossorigin="anonymous"></script>
           <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    </head>
    <style>
        html,
body {
  font-family: 'Roboto', sans-serif;
  color: #404040;
  background-color: #fff;
}

  .container {
  width: 800px;
  margin-top: 20px;
}

.button-group {
  margin-bottom: 20px;
}

.counter {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
  margin-right: 10px;
}

.posts {
  clear: both;
  list-style: none;
  padding-left: 0;
  width: 100%;
}

.posts li {
  background-color: #fff;
  border: 1px solid #d8d8d8;
  padding-top: 10px;
  padding-left: 20px;
  padding-right: 20px;
  padding-bottom: 10px;
  margin-bottom: 10px;
  word-wrap: break-word;
  min-height: 42px;
}
    </style>
    <body>
        <nav>
            <div class="nav-wrapper white">
              <a href="#!" class="brand-logo" style="color:black;margin-left: 5px;">Piko</a>
              <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
              <ul class="right hide-on-med-and-down">
                <li><a href="main.html"><i class="material-icons" style="color:black;">home</i></a></li>
                <li><a href="badges.html"><i class="material-icons" style="color:black;">explore</i></a></li>
                <li><a href="add.html"><i class="material-icons" style="color:black;">add_box</i></a></li>
                <li><a href="mobile.html"><i class="material-icons" style="color:black">notifications</i></a></li>
                <li><a href="profile.html"><i class="material-icons" style="color:black">person</i></a></li>
              </ul>
            </div>
          </nav>
          <ul class="sidenav" id="mobile-demo">
            <li><a href="main.html"><i class="material-icons" style="color:black;">home</i></a></li>
            <li><a href="badges.html"><i class="material-icons" style="color:black;">explore</i></a></li>
            <li><a href="add.html"><i class="material-icons" style="color:black;">add_box</i></a></li>
            <li><a href="mobile.html"><i class="material-icons" style="color:black">notifications</i></a></li>
            <li><a href="profile.html"><i class="material-icons" style="color:black">person</i></a></li>

          </ul>
<div class="container">
    <div class="row">
        <div class="col s12">
<div class="card responsive" style="padding:10px;">
<div class="column"  style="position:relative"><div id="profile"><img src="https://picsum.photos/80" alt="" type="file"  style="pointer-events: visibleStroke;" class=" circle img-responsive"></div>
<div class="column" style="position:relative;left:50px;bottom: 40px;"><button class="btn orange" style="border-radius: 50px; position: relative; left: 50px;bottom: 20px;">Edit Profile</button></div>
<h5 style="position: relative; bottom: 20px;" id="name">Aaditya Srivastava</h5>
<p style="font-size:20px; position: relative; bottom:15px;" id="username">@corteri</p>
<p style="font-size:20px; position: relative; bottom:15px;">Enterpreuner</p>
<p style="font-size:20px; position: relative; bottom:15px;">https://corteri.com</p>
<div class="column"><p>Follower</p><p id="follower">1</p><p>Following</p><p id="following">2</p></div>

</div>
</div>
</div>
        </div>

        <div class="card">
        </div>
    </div>

</div>
<div class="container">
    <div class = "row">
        <div class = "col s12">
           <ul class = "tabs">
              <li class = "tab col s3"><a href = "#inbox">Peeks</a></li>
              <li class = "tab col s3"><a class = "active" href = "#unread">
                 Repeek</a></li>
              <li class = "tab col s3"><a href = "#outbox">
                 mentions and likes</a></li>
           </ul>
        </div>
        <div id = "inbox" class = "col s12">





        </div>
        <div id = "unread" class = "col s12">Empty</div>
        <div id = "outbox" class = "col s12">Empty</div>
        <div id = "sent" class = "col s12">Sent</div>
     </div>
</div>

    </body>





   <script>


      const hello = async ()=>
      {
    axios.post("http://localhost:5555/profile/getProfile",{token:document.cookie}).then((response)=>
    {
      console.log(response.data.lastname);
      if(response.data.response==="1")
      {
        let firstname = response.data.firstname
        let lastname = response.data.lastname
        let username = response.data.username
        let profile = response.data.profile;
        document.getElementById("name").innerHTML=response.data.firstname+" "+response.data.lastname;
        document.getElementById("username").innerHTML=response.data.username;
        document.getElementById("follower").innerHTML=response.data.follower;
        document.getElementById("following").innerHTML=response.data.following;


        if(response.data.profile!="")
        {
          document.getElementById("profile").innerHTML=`<img style="height:80px;width:80px;" src="https://ipfs.infura.io/ipfs/${response.data.profile}" alt="" type="file"  style="pointer-events: visibleStroke;" class=" circle img-responsive">`

        }
        hello1(firstname,lastname,username,response.data.profile);
      }

    }).catch((err)=>
    {
      if(err)
      {
        throw err;
      }

    })
      }
      hello();

      const hello1 = async(firstname,lastname,username,file)=>
      {
         axios.post("http://localhost:5555/do/getTweet",{token:document.cookie}).then((response1)=>
    {
      console.log(response1.data.data)

      let c = "";
response1.data.data.forEach((element)=>
{
   c = c+ `<div class="card responsive" style="padding:10px;"><div class="column" style="position:relative"><img style="height:40px;width:40px;" src="https://ipfs.infura.io/ipfs/${file}" alt="" class=" circle img-responsive">
<div class="column" style="position:relative;left:50px;bottom: 40px;"><b>${firstname}+${lastname}</b><p style="position:relative;bottom:20px">${username}</p></div></div>
<div class="column" style="position:relative;left:50px;bottom: 75px;"><p style="font-size:10">Programmer,enterpreuner and a little bit fascist </p></div>
<p>${element[0]}
    </p>

<div class="column"><i class="material-icons" style="color:black">thumb_up</i><i class="material-icons" style="color:black">comment</i><i class="material-icons" style="color:black">repeat</i><i class="material-icons" style="color:black">reply</i></div>
</div>`;
})
document.getElementById("inbox").innerHTML=c;

}).catch((err)=>
{
  if(err)
  {
    throw err;
  }
})

      }
    </script>
<script>
  function getFollower()
  {
    axios.post("http://localhost:5555/profile/getFollower",{token:document.cookie}).then((response)=>
    {
      console.log(response);
      if(response.data.response==="1")
      {
        let div = document.createElement("div")
                div.className="container";
                div.innerHTML='<h2>Following</h2>'
                let ul = document.createElement("ul")
                ul.className="collection";
        response.data.data.forEach((element)=>
        {
          if(element[5]==="1")
          {
          let btn = document.createElement("button")
         btn.setAttribute("class","btn red")
         btn.innerHTML='Unfollow'
         btn.style="border-radius:40px;"
         let li = document.createElement("li");
         let a = document.createElement("a");
a.className='secondary-content';
a.appendChild(btn);
li.setAttribute("class","collection-item avatar")
let span = document.createElement("span")
span.setAttribute("class","title")
span.innerHTML=element[4]
btn.onclick=((e)=>
{
  axios.post("http://localhost:5555/profile/unfollow",{token:document.cookie,fid:element[1]}).then((response)=>
  {
    if(response.data.response==="1")
    {
      alert("Unfollowed");
      getFollower();
    }
    else
    {
      alert("We Have Problem");
    }
  }).catch((err)=>
  {
    if(err)
    {
      throw err;
    }
  })
})
let p = document.createElement("P")
p.innerHTML= element[2]+" "+element[3]
li.appendChild(p)
li.appendChild(span)
li.appendChild(a)
ul.appendChild(li);
div.appendChild(ul)
document.body.appendChild(div);
          }
        })
        let div1 = document.createElement("div")
                div1.className="container";
                div1.innerHTML='<h2>Follower</h2>'
                let ul1 = document.createElement("ul")
                ul1.className="collection";
        response.data.data.forEach((element)=>
        {
          if(element[5]==="2")
          {
          let btn = document.createElement("button")


         btn.setAttribute("class","btn red")
         btn.innerHTML='Follow'
         btn.style="border-radius:40px;"
         let li = document.createElement("li");
         let a = document.createElement("a");
a.className='secondary-content';
a.appendChild(btn);
li.setAttribute("class","collection-item avatar");
let span = document.createElement("span");
span.setAttribute("class","title");
span.innerHTML=element[4];
let p = document.createElement("P");
p.innerHTML= element[2]+" "+element[3];
li.appendChild(p);
li.appendChild(span);
li.appendChild(a);
ul1.appendChild(li);
div1.appendChild(ul1);
document.body.appendChild(div1);
          }
        })
      }
      else
      {
        console.log("Sorry Their Is Something That We Have To Do");
      }
    })
  }
  getFollower();
</script>
</html>