<!DOCTYPE html>
<html>
<head>
  <title>Profile Page</title>
  <!--Responsive Meta Tag-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!--Import Google Icon Font-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!--Import materialize.css-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
  <!--Import jQuery Library-->
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <!--Import materialize.js-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.js" integrity="sha512-otOZr2EcknK9a5aa3BbMR9XOjYKtxxscwyRHN6zmdXuRfJ5uApkHB7cz1laWk2g8RKLzV9qv/fl3RPwfCuoxHQ==" crossorigin="anonymous"></script>
  <style type="text/css">
	  .Pad_top{ padding-top:25px;}
	   header, main, footer {
		  padding-left: 300px;
	   }

	   @media only screen and (max-width : 992px) {
		  header, main, footer {
			padding-left: 0;
		  }
	   }
  </style>
</head>
<body>

<div class="row">
    <div class="col m2 l2">
    <div class="container">
        <ul id="slide-out" class="side-nav fixed" style="width:260px;">
          <div class="user-view">
              <center>
              <img src="./assets/logo.gif" class="img-responsive circle" style="height:80px;width:80px;"/>
          </center></div>
        <li><a class="waves-effect" href="feed.html"><i class="material-icons">home</i>Feeds</a></li>
        <li><a class="waves-effect" href="trending.html"><i class="material-icons">trending_up</i>Trending</a></li>
        <li><a class="waves-effect" href="#!"><i class="material-icons">explorer</i>Explore</a></li>
        <li><a class="waves-effect" href="add.html"><i class="material-icons">add</i>Add</a></li>
        <li><a class="waves-effect" href="notification.html"><i class="material-icons">notifications</i>Notifications</a></li>
        <li><a class="waves-effect" href="mentions.html"><i class="material-icons">notifications</i>Mentions</a></li>


        <li><a class="waves-effect" href="profile1.html"><i class="material-icons">person</i>Profile</a></li>
        <div class="user-view">
            <center>
        <button class="btn black" style="border-radius:40px;">PEEKO</button>
</center></div>
      </ul>
      <a href="#" data-activates="slide-out" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
</div>
<div class="col m10 s12 l10">
    <nav class="white">
        <div class="nav-wrapper">
          <a  class=" brand-logo" style="font-family: monospace; color:black; position: relative; left:15px;">Trending</a>
          <ul id="nav-mobile" class="right hide-on-med-and-down">
          </ul>
        </div>
      </nav>
      <div class="col s6 m6 l6" id="trendingtweets">
</div>
<script>
    function love()
    {
        axios.post("http://localhost:5555/do/trendingHashtags",{token:document.cookie}).then((response)=>
        {
          console.log(response.data)
          if(response.data.response==="1")
          {
            response.data.data.forEach(element => {
    let col = document.createElement("div")
    let col1 = document.createElement("div")
    let col2 = document.createElement("div")
    let col3 = document.createElement("div")
    let column = document.createElement("div")
    let column1 = document.createElement("div")
    let column2 = document.createElement("div")
    let column3 = document.createElement("div")
    let card = document.createElement("div")
    let cardcontent = document.createElement("div")
    let row = document.createElement("div")
    let row2 = document.createElement("div")
    let divider = document.createElement("div")
    col.className="col s6 m6 l6";
    col1.className="col s4 m4 l4";
    col2.className="col s4 m4 l4";
    col3.className="col s4 m4 l4";
    card.className="card z-depth-5";
    column.className="column";
    column1.className="column";
    column2.className="column";
    column3.className="column";
    cardcontent.className="card-content";
    row.className="row";
    row2.className="row";
    divider.className="divider";
    row2.style="position:relative:top:10px;"
    card.style="width:600px;display;table;margin:0 auto;position:relative;top:15px;";
    let img = document.createElement("img");
    let b = document.createElement("b");
    b.innerHTML=element[12]+" "+element[13];
    let p = document.createElement("p");
    p.innerHTML = element[0];
    let p1 = document.createElement("p");
    p1.innerHTML=element[9] //like
    p1.style="position:relative;bottom:30px;left:30px;"
    let p2 = document.createElement("p");
    p2.innerHTML=element[11] //comment
    p2.style="position:relative;bottom:30px;left:30px;"
    let p3 = document.createElement("p");
    p3.innerHTML=element[10] //retweet
    p3.style="position:relative;bottom:30px;left:30px;"
    let i1 = document.createElement("i");
    let i2 = document.createElement("i");
    let i3 = document.createElement("i");
    i1.className="material-icons";
    i1.innerHTML="thumb_up";
    i2.className="material-icons";
    i2.innerHTML="message";
    i3.className="material-icons";
    i3.innerHTML="repeat";
    let span = document.createElement("span");
    span.innerHTML=element[14] //username
    img.style="height:50px;width:50px;";
    img.src = "https://ipfs.infura.io/ipfs/"+element[15]; //image
    img.className="img-responsive circle"
    b.style="position:relative;bottom:25px;left:10px;font-size:16px;";
    span.style="position:relative;bottom:28px;left:63px;color:grey";
    card.appendChild(cardcontent);
    cardcontent.appendChild(row);
    row.appendChild(column);
    column.appendChild(img);
    column.appendChild(b);
    row.appendChild(column1);
    column1.appendChild(span);
    row.appendChild(column2);
    column2.appendChild(p);
    let newelement = element[20];
    console.log(element[20])
    for(let i=0;i<newelement.length;i++)
    {
      let element91 = newelement[i];
      console.log(element91);
      let img1 = document.createElement("img");
    img1.src=`https://ipfs.infura.io/ipfs/${element91}`;
    img1.alt="";
    img1.style=`max-width:300px;
          max-height:300px;
           aspect-ratio: 16/9`;
    column2.appendChild(img1)
    }
    cardcontent.appendChild(divider);
    cardcontent.appendChild(row2);
    row2.appendChild(column3);
    column3.appendChild(col1)
    col1.appendChild(i1);
    col1.appendChild(p1);
    column3.appendChild(col2)
    col2.appendChild(i2);
    col2.appendChild(p2);
    column3.appendChild(col3)
    col3.appendChild(i3);
    col3.appendChild(p3);
    i2.onclick = ((e)=>
  {
    window.location.href = `http://localhost:5500/reply.html?tid=${element[4]}&fid=${element[5]}`;
  });

  p.onclick = ((e)=>
  {
    window.location.href = `http://localhost:5500/singlefeed.html?tid=${element[4]}`;
  });
  b.onclick = ((e)=>
  {
    window.location.href = `http://localhost:5500/profile2.html?fid=${element[5]}&name=${element[12]+element[13]}&status=0`;
  });


  if(element[18])
  {
    i1.innerHTML="thumb_down";
  }
  else
  {
    i1.innerHTML="thumb_up"
  }
  i1.onclick = ((e)=>
  {
    p1.innerHTML="pending..."
    axios.post("http://localhost:5555/do/do_like",{token:document.cookie,tid:element[4]}).then((response)=>
    {
      console.log(response)
      if(response.data.response==="1")
      {
        let count = element[9]-1;
        if(response.data.data)
        {
        p1.innerHTML=element[9]+1;
        i1.innerHTML="thumb_down";
        }
        else
        {
          if(count==0)
          {
            p1.innerHTML=0;
        i1.innerHTML="thumb_up";
          }
          else
          {
            p1.innerHTML=count;
        i1.innerHTML="thumb_up";

          }

        }
      }
      else
      {
        //p1.innerHTML=element[10]-1;
      }
    })
  });
  i3.onclick = ((e)=>
  {
    axios.post("http://localhost:5555/do/doRetweet",{token:document.cookie,fid:element[5],tid:element[4]}).then((response)=>
    {
      p3.innerHTML="pending"
      console.log(response)
      if(response.data.response==="1")
      {
        //alert("Retweeted")
        p3.innerHTML=element[10]+1;
      }
      else
      {
        p3.innerHTML=element[10]-1;
      }
    })
  });
//col.appendChild(card);
document.getElementById("trendingtweets").append(card);
            });
}
});
    }
love();
</script>
<div class="col s6 m6 l6">
    <ul class="collection">
        <ul class="collection with-header">
            <li class="collection-header" id="trendingh"><h4 style="font-family: monospace;">Trending Hashtags</h4></li>
           <!-- <li class="collection-item"><div>#cancelboardexam2021<a href="#!" class="secondary-content"><i class="material-icons">add</i></a></div></li>
            <li class="collection-item"><div>#loveyou<a href="#!" class="secondary-content"><i class="material-icons">add</i></a></div></li>
            <li class="collection-item"><div>#wantstobuildLegacy<a href="#!" class="secondary-content"><i class="material-icons">add</i></a></div></li>
            <li class="collection-item"><div>Alvin<a href="#!" class="secondary-content"><i class="material-icons">add</i></a></div></li>
           --></ul>
    </ul>
    <br>
        <ul class="collection">
            <ul class="collection with-header">
                <li class="collection-header"><h4 style="font-family: monospace;">Trending Topics</h4></li>
                <li class="collection-item"><div>#cancelboardexam2021<a href="#!" class="secondary-content"><i class="material-icons">add</i></a></div></li>
                <li class="collection-item"><div>#loveyou<a href="#!" class="secondary-content"><i class="material-icons">add</i></a></div></li>
                <li class="collection-item"><div>#wantstobuildLegacy<a href="#!" class="secondary-content"><i class="material-icons">add</i></a></div></li>
                <li class="collection-item"><div>Alvin<a href="#!" class="secondary-content"><i class="material-icons">add</i></a></div></li>
              </ul>
        </ul>
</div>
<Script>
axios.post("http://localhost:5555/do/hashtags",{token:document.cookie}).then((response)=>
{
  console.log(response)
  if(response.data.response==="1")
  {
    console.log(response.data.data)
    response.data.data.forEach(element => {
      console.log("why")
      let li = document.createElement("li");
       li.className="collection-item";
       let div = document.createElement("div");
       let a = document.createElement("a");
       let span = document.createElement("span");
       span.innerHTML=element[1];
       a.className="secondary-content";
       let i = document.createElement("i");
       i.className = "material-icons";
       i.innerHTML="add";
       li.appendChild(div);
       div.appendChild(span);
       div.appendChild(a);

       a.appendChild(i);
li.onclick = ((e)=>
{
  window.location.href=`http://localhost:5500/tweets.html?tid=${element[1].replace('#','')}`;
})
document.getElementById("trendingh").append(li);

    });
  }
  else
  {
    console.log("OH SORRY");
  }
})
</script>
    </div>
    </div>
    </div>
    </body>
    </html>